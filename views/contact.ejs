<div class="space-y-24 max-w-4xl mx-auto min-h-[60vh] flex flex-col justify-center">
    <!-- Header -->
    <section class="space-y-4">
        <span class="text-sm font-mono uppercase tracking-widest" style="color: var(--color-text-muted);">02 / Contact</span>
        <h1 class="text-6xl md:text-8xl font-bold tracking-tighter leading-[0.9]" style="color: var(--color-text);">
            Let's Start <br> a Conversation.
        </h1>
    </section>

    <!-- Contact Form & Details -->
    <section class="grid grid-cols-1 md:grid-cols-2 gap-12">
        <!-- Contact Form -->
        <div class="space-y-6">
            <h3 class="text-sm font-mono uppercase tracking-widest" style="color: var(--color-text-muted);">Send a Message</h3>

            <form id="contactForm" class="space-y-4">
                <!-- Name Field -->
                <div class="space-y-2">
                    <label for="name" class="block text-sm font-mono uppercase tracking-wider" style="color: var(--color-text);">Name</label>
                    <input
                        type="text"
                        id="name"
                        name="name"
                        required
                        minlength="2"
                        class="w-full px-4 py-3 border-2 transition-colors focus:outline-none focus:border-opacity-100"
                        style="background: var(--color-bg); color: var(--color-text); border-color: var(--color-border);"
                    />
                </div>

                <!-- Email Field -->
                <div class="space-y-2">
                    <label for="email" class="block text-sm font-mono uppercase tracking-wider" style="color: var(--color-text);">Email</label>
                    <input
                        type="email"
                        id="email"
                        name="email"
                        required
                        class="w-full px-4 py-3 border-2 transition-colors focus:outline-none focus:border-opacity-100"
                        style="background: var(--color-bg); color: var(--color-text); border-color: var(--color-border);"
                    />
                </div>

                <!-- Message Field -->
                <div class="space-y-2">
                    <label for="message" class="block text-sm font-mono uppercase tracking-wider" style="color: var(--color-text);">Message</label>
                    <textarea
                        id="message"
                        name="message"
                        required
                        minlength="10"
                        rows="6"
                        class="w-full px-4 py-3 border-2 transition-colors focus:outline-none focus:border-opacity-100 resize-vertical"
                        style="background: var(--color-bg); color: var(--color-text); border-color: var(--color-border);"
                    ></textarea>
                </div>

                <!-- Error/Success Messages -->
                <div id="formMessage" class="hidden p-4 text-sm font-mono"></div>

                <!-- Submit Button -->
                <button
                    type="submit"
                    class="px-8 py-3 font-mono uppercase tracking-widest text-sm transition-opacity hover:opacity-60"
                    style="background: var(--color-text); color: var(--color-bg);"
                >
                    Send Message
                </button>
            </form>
        </div>

        <!-- Socials -->
        <div class="space-y-2">
            <h3 class="text-sm font-mono uppercase tracking-widest" style="color: var(--color-text-muted);">Socials</h3>
            <div class="flex flex-col items-start space-y-2">
                <a href="https://www.linkedin.com/in/stephen-wanjiru-163b90149" target="_blank" class="text-xl font-bold transition-opacity hover:opacity-60 arrow-link" style="color: var(--color-text);">LinkedIn <span>&nearr;</span></a>
                <a href="https://x.com/ngigicrown" target="_blank" class="text-xl font-bold transition-opacity hover:opacity-60 arrow-link" style="color: var(--color-text);">X (Twitter) <span>&nearr;</span></a>
            </div>
        </div>
    </section>

    <!-- Form Submission Script -->
    <script>
        document.getElementById('contactForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const formMessage = document.getElementById('formMessage');
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.textContent;

            // Disable button and show loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';
            formMessage.classList.add('hidden');

            // Get form data
            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                message: document.getElementById('message').value
            };

            try {
                const response = await fetch('/contact', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();

                if (response.ok) {
                    // Success
                    formMessage.textContent = 'Message sent successfully! I\'ll get back to you soon.';
                    formMessage.style.background = 'var(--color-text)';
                    formMessage.style.color = 'var(--color-bg)';
                    formMessage.classList.remove('hidden');
                    e.target.reset();
                } else {
                    // Validation errors
                    const errorMessages = data.errors.map(err => err.msg).join(', ');
                    formMessage.textContent = `Error: ${errorMessages}`;
                    formMessage.style.background = '#ff0000';
                    formMessage.style.color = '#ffffff';
                    formMessage.classList.remove('hidden');
                }
            } catch (error) {
                formMessage.textContent = 'Network error. Please try again later.';
                formMessage.style.background = '#ff0000';
                formMessage.style.color = '#ffffff';
                formMessage.classList.remove('hidden');
            } finally {
                // Re-enable button
                submitBtn.disabled = false;
                submitBtn.textContent = originalBtnText;
            }
        });
    </script>
</div>
